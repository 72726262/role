-- ============================================
-- ุญู ูุดููุฉ Email Not Confirmed
-- ============================================

/*
  ุงููุดููุฉ:
  ุนูุฏ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ ุจู signUp()ุ Supabase ูุฑุณู email confirmation
  ููููุน ุชุณุฌูู ุงูุฏุฎูู ุญุชู ูุชู ุงูุชุฃููุฏ.
  
  ุงูุญู: ุชุนุทูู Email Confirmation ูู Supabase
*/

-- ============================================
-- ุงูุญู 1: ุชุนุทูู Email Confirmation ูู Dashboard
-- ============================================

/*
ุงูุฎุทูุงุช:
1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู: Authentication โ Settings โ Email Auth
3. ุงุจุญุซ ุนู "Enable email confirmations"
4. ูู ุจุชุนุทูู ุงูุฎูุงุฑ (Disable)
5. ุงุญูุธ ุงูุชุบููุฑุงุช

ุจุนุฏ ุฐููุ ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ูููููู ุชุณุฌูู ุงูุฏุฎูู ูุจุงุดุฑุฉ ุจุนุฏ ุงูุชุณุฌูู.
*/

-- ============================================
-- ุงูุญู 2: ุชุญุฏูุซ auth.users ูุฏููุงู (ููุญุณุงุจุงุช ุงูููุฌูุฏุฉ)
-- ============================================

-- ุชุฃููุฏ ุฌููุน ุงูุญุณุงุจุงุช ุบูุฑ ุงููุคูุฏุฉ
UPDATE auth.users
SET 
  email_confirmed_at = NOW(),
  confirmed_at = NOW()
WHERE email_confirmed_at IS NULL;

-- ุชุฃููุฏ ุญุณุงุจ ูุนูู ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู
UPDATE auth.users
SET 
  email_confirmed_at = NOW(),
  confirmed_at = NOW()
WHERE email = 'example@email.com';

-- ============================================
-- ุงูุชุญูู ูู ุงูุญุณุงุจุงุช ุบูุฑ ุงููุคูุฏุฉ
-- ============================================

-- ุนุฑุถ ุฌููุน ุงูุญุณุงุจุงุช ุบูุฑ ุงููุคูุฏุฉ
SELECT 
  id,
  email,
  created_at,
  email_confirmed_at
FROM auth.users
WHERE email_confirmed_at IS NULL;

-- ============================================
-- ููุงุญุธุงุช
-- ============================================

/*
1. โ ุงูุญู ุงูุฃูุถู: ุชุนุทูู Email Confirmation ูู Dashboard
   - ุฃุณูู ูุฃุณุฑุน
   - ูุทุจู ุนูู ุฌููุน ุงูุชุณุฌููุงุช ุงูุฌุฏูุฏุฉ ุชููุงุฆูุงู
   
2. โ๏ธ ููุฅูุชุงุฌ: 
   - ูููุถู ุชูุนูู Email Confirmation ูุญูุงูุฉ ุฃูุถู
   - ูููู ุฅุถุงูุฉ ุฎุงุตูุฉ "ุชุฎุทู ุงูุชุญูู" ููู Admins ููุท

3. ๐ ุงูุจุฏูู: Auto-confirm ูู ุงูููุฏ
   - ุงุณุชุฎุฏุงู emailRedirectTo ูู signUp()
   - ููู ูุชุทูุจ ุฅุนุฏุงุฏ email templates
*/
